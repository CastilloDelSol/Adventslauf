<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Iframe Parent – Clean Version</title>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 40px;
        background: #f5f5f5;
    }

    /* Das Wrapper-Div sorgt dafür, dass 900px zentriert bleiben */
    .iframe-wrapper {
        max-width: 900px;     /* maximale Breite */
        margin: 0 auto;       /* zentriert */
    }

    #statsFrame {
        width: 100%;          /* passt sich der wrapper-Breite an */
        height: 0;            /* wird dynamisch gefüllt */
        border: none;
        display: block;
        overflow: hidden;
        border-radius: 6px;
    }
</style>

</head>
<body>

<h1>Parent-Seite (Strato)</h1>
<p>Unten ist dein eingebettetes Statistik-Tool.</p>

<div class="iframe-wrapper">
    <iframe
        id="statsFrame"
        src="dev.html"
        loading="lazy"
    ></iframe>
</div>

<script>
const frame = document.getElementById("statsFrame");

// Sicherer Event-Listener
window.addEventListener("message", (event) => {
    if (!event.data || event.data.type !== "iframe:resize") return;

    const newHeight = parseInt(event.data.height, 10);
    if (!isNaN(newHeight)) {
        frame.style.height = newHeight + "px";
    }
});
</script>

</body>
</html>
